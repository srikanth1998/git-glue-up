import{r as s,j as e,R as j,a as g}from"./globals.js";import{u as b,T as f,A as v,s as S,a as y,b as w}from"./toaster.js";const z=()=>navigator.language.startsWith("ja")?"japanese":"english",A=async()=>{if(!window.ai)return{available:"no"};const{available:t}=await window.ai.languageModel.capabilities();return{available:t}},L=()=>{const[t,r]=s.useState(""),[i,l]=s.useState(z()),[m,n]=s.useState(!1),[o,u]=s.useState({available:"no"}),[d,x]=s.useState("");s.useEffect(()=>{A().then(a=>{u(a)}),chrome.runtime.onMessage.addListener(a=>{a.type==="transcript"&&x(h=>`${h}
${a.data}`)})},[]);const{toast:c}=b(),p=async()=>{n(!0);try{const a=await S(i);r(a),c({description:"Summarized",color:"success"})}catch(a){console.error(a),r(`Failed to summarize: ${a}`),c({description:"Failed to summarize",color:"error"})}finally{n(!1)}};return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"box-border h-auto w-[400px]",children:[e.jsx("div",{className:"flex flex-col m-1 p-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{children:"Transcription"}),e.jsx(f,{value:d,rows:10,readOnly:!0})]})}),o.available==="no"&&e.jsx("div",{className:"flex flex-col m-1 p-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{children:"AI Summarization is not available"}),e.jsx("p",{children:"AI Summarization is not available. Please make sure your chrome supports Prompt API."})]})}),o.available!=="no"&&e.jsx(v,{setLanguage:l,language:i,isSummaryLoading:m,handleSummarize:p,summary:t})]})})};function T(){return e.jsxs(y,{storageKey:"chrome-extension-transcriptor-theme",children:[e.jsx(L,{}),e.jsx(w,{})]})}j.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(T,{})}));
